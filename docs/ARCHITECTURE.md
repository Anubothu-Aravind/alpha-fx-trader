# AlphaFX Trader - System Architecture

## Overview

AlphaFX Trader is a real-time Forex trading application that implements algorithmic trading strategies with comprehensive risk management and monitoring capabilities.

## Architecture Components

### 1. Data Layer
- **Database**: SQLite for local data storage
- **Tables**:
  - `trades`: Transaction history with execution details
  - `positions`: Current open positions and P&L tracking
  - `price_history`: Historical price data for analysis
  - `algorithm_signals`: Trading signals generated by algorithms
  - `trading_stats`: Daily trading statistics and volume tracking

### 2. Business Logic Layer

#### FX Data Simulator (`FXDataSimulator.js`)
- Simulates real-time FX price feeds for 6 major currency pairs
- Generates realistic price movements with volatility modeling
- Supports historical data generation for backtesting
- Event-driven architecture for real-time updates

#### Trading Algorithms (`TradingAlgorithms.js`)
- **Simple Moving Average (SMA) Crossover**: Golden/Death cross signals
- **Relative Strength Index (RSI)**: Overbought/oversold signals
- **Bollinger Bands**: Price band breakout signals
- **Combined Analysis**: Weighted signal aggregation from multiple algorithms

#### Trading Engine (`TradingEngine.js`)
- Automated trade execution based on algorithm signals
- Risk management with position sizing and exposure limits
- Daily volume limit enforcement ($10M stop threshold)
- Real-time P&L calculation and position management

### 3. API Layer (`server/app.js`)
RESTful endpoints for:
- Trading control (start/stop)
- Price data retrieval
- Trade history and positions
- Algorithm signals
- Backtesting functionality
- Statistics and reporting

### 4. Real-time Communication
- **WebSocket Server**: Real-time data streaming
- **Event Broadcasting**: Price updates, trade executions, status changes
- **Client Synchronization**: Live updates across connected clients

### 5. Presentation Layer
React-based web interface with:
- **Dashboard**: Unified view of trading operations
- **Price Grid**: Real-time currency pair pricing
- **Blotter**: Trade execution history
- **Positions**: Open position management
- **Trading Controls**: Start/stop functionality with volume monitoring

## Data Flow

```
1. FX Data Simulator generates price updates
2. Trading Algorithms analyze price data and generate signals
3. Trading Engine evaluates signals and executes trades
4. Database stores all transactions and updates positions
5. WebSocket broadcasts updates to connected clients
6. React UI displays real-time information
```

## Technology Stack

- **Backend**: Node.js with Express framework
- **Database**: SQLite with SQL queries
- **Frontend**: React with real-time WebSocket communication
- **Real-time**: WebSocket for live data streaming
- **Charting**: Recharts for data visualization

## Scalability Considerations

- Modular component architecture for easy extension
- Event-driven design for loose coupling
- Database indexing for query performance
- WebSocket connection pooling for multiple clients
- Environment-based configuration

## Security Features

- Input validation on all API endpoints
- Error handling and logging
- Environment variable configuration
- CORS protection for cross-origin requests

## Performance Optimizations

- Efficient price data structures with limited history
- Batch database operations where possible
- Real-time data streaming without polling
- Optimized React rendering with state management
- SQLite indexes on frequently queried columns